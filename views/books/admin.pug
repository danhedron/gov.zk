//- vim:ft=jade
extends ../skeleton
block title
  title GOV.ZK Admin
block breadcrumb
  li
    a(href='/book-club') Book club
  li
    a(href='/book-club/admin') Administration
block css
  link(rel='stylesheet', href='/index.css')
block content
  pre.code #{JSON.stringify(state)}
  .grid-row
    .column-two-thirds
      h1.heading-large Administration

      h2.heading-medium Book club state
      form(method='POST')
        h3.heading-small Permissions
        fieldset
          .multiple-choice
            input#choice4(type='checkbox', name='allowVoting')
            label(for='choice4') Allow voting on the shortlist
          .multiple-choice
            input#choice5(type='checkbox', name='addToLonglist')
            label(for='choice5') Allow adding books to the longlist
        h3.heading-small Advertising
        fieldset(required)
          .multiple-choice
            input#choice1(type='radio',name='advertise',value='LONGLIST')
            label(for='choice1') Promote adding to the longlist
              if state == 'LONGLIST'
                span  (active)
          .multiple-choice
            input#choice2(type='radio',name='advertise',value='SHORTLIST')
            label(for='choice2') Promote voting on the shortlist
              if state == 'SHORTLIST'
                span  (active)
          .multiple-choice
            input#choice3(type='radio',name='advertise',value='READING_LIST')
            label(for='choice3') Promote viewing the reading list
              if state == 'READING_LIST'
                span  (active)
        p.submit
          input(type='submit',value='Update state',name='changeState').button
  .grid-row
    .column-full
      h2.heading-medium Book states
      table
        thead
          tr
            th Book
            th Author
            th Approvals
            th Actions
        for book in books
          tr
            td
              a(href='/book-club/book/'+book.isbn) #{book.title}
            td #{book.author}
            if book.approve
              td.numeric #{book.approve.length}
            else
              td.numeric â€”
            td
              if !book.readingList
                form(method='POST')
                  input(type='hidden',name='title',value=book.title)
                  input(type='hidden',name='author',value=book.author)
                  input(type='hidden',name='isbn',value=book.isbn)
                  input(type='submit',name='readingList',value='Add to reading list').button
