//- vim:ft=jade
extends ../skeleton
block title
  title GOV.ZK Admin
block breadcrumb
  li
    a(href='/book-club') Book club
  li
    a(href='/book-club/admin') Administration
block css
  link(rel='stylesheet', href='/index.css')
block content
  .grid-row
    .column-two-thirds
      h1.heading-large Administration

      h2.heading-medium Book club state
      p The book club is currently in <strong>#{state}</strong> mode.
      form(method='POST')
        fieldset(required)
          .multiple-choice
            input#choice1(type='radio',name='state',value='LONGLIST')
            label(for='choice1') Allow longlist contributions and disable shortlist voting
              if state == 'LONGLIST'
                span  (active)
          .multiple-choice
            input#choice2(type='radio',name='state',value='SHORTLIST')
            label(for='choice2') Disable longlist additions and allow shortlist voting
              if state == 'SHORTLIST'
                span  (active)
          .multiple-choice
            input#choice3(type='radio',name='state',value='READING_LIST')
            label(for='choice3') Disable voting and promulgate the reading list
              if state == 'READING_LIST'
                span  (active)
        p.submit
          input(type='submit',value='Update state').button
  .grid-row
    .column-full
      table
        thead
          tr
            th Book
            th Author
            th Approvals
            th Actions
        for book in books
          tr
            td
              a(href='/book-club/book/'+book.isbn) #{book.title}
            td #{book.author}
            if book.approve
              td.numeric #{book.approve.length}
            else
              td.numeric â€”
            td
              if !book.readingList
                form(method='POST')
                  input(type='hidden',name='title',value=book.title)
                  input(type='hidden',name='author',value=book.author)
                  input(type='hidden',name='isbn',value=book.isbn)
                  input(type='submit',name='readingList',value='Add to reading list').button
